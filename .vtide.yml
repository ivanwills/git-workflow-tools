---
count: 8
default:
  restart: 0
  wait: 1
name: git-workflow-tools
terminals:
  1a:
    command: ./Build && ./Build testcover
    restart: 1
    wait: 0
    watch:
      - lib
      - bin
      - test
  2:
    edit: base
  3:
    edit: utils
editor:
  helper: |
    sub {
        my ($self, $group) = @_;
        return () if $group !~ /^cmd-/;

        my ($cmd) = $group =~ /cmd-(.*)/;
        my $lib = join '', map {ucfirst $_} split /-/, $cmd;
        return (
            "bin/git-$cmd",
            "lib/App/Git/Workflow/Command/$lib.pm",
            "t/$group.t",
        );
    }
  helper_autocomplete: |
    sub {
      my ($pos, $args) = @_;
      my $arg = $args->[$pos] || '';
      my $argument = $arg && $arg ne 'edit' ? qr/^$arg/ : qr/./;

      my @list = map {/^t\/cmd-(.*).t$/; $1} glob "t/cmd-*.t";

      return @list;
    }
  files:
    base:
      - lib/App/Git/Workflow.pm
      - lib/App/Git/Workflow/Command.pm
      - lib/App/Git/Workflow/Repository.pm
    utils:
      - lib/App/Git/Workflow/Pom.pm
      - lib/Mock/App/Git/Workflow/Repository.pm
      - lib/Test/Git/Workflow/Command.pm
    branch-clean:
      - bin/git-branch-clean
      - lib/App/Git/Workflow/Command/BranchClean.pm
      - t/cmd-branch-clean.t
    branch-grep:
      - bin/git-branch-grep
      - lib/App/Git/Workflow/Command/BranchGrep.pm
      - t/cmd-branch-grep.t
    committers:
      - bin/git-committers
      - lib/App/Git/Workflow/Command/Committers.pm
      - t/cmd-committers.t
    cows:
      - bin/git-cows
      - lib/App/Git/Workflow/Command/Cows.pm
      - t/cmd-cows.t
    feature:
      - bin/git-feature
      - lib/App/Git/Workflow/Command/Feature.pm
      - t/cmd-feature.t
    files:
      - bin/git-files
      - lib/App/Git/Workflow/Command/Files.pm
      - t/cmd-files.t
    hook-setup:
      - bin/git-hook-setup
      - lib/App/Git/Workflow/Command/HookSetup.pm
      - t/cmd-hook-setup.t
    jira:
      - bin/git-jira
      - lib/App/Git/Workflow/Command/Jira.pm
      - t/cmd-jira.t
    pom:
      - bin/git-pom
      - lib/App/Git/Workflow/Command/Pom.pm
      - t/cmd-pom.t
      - lib/App/Git/Workflow/Pom.pm
      - t/pom.t
    recent:
      - bin/git-recent
      - lib/App/Git/Workflow/Command/Recent.pm
      - t/cmd-recent.t
    tag-grep:
      - bin/git-tag-grep
      - lib/App/Git/Workflow/Command/TagGrep.pm
      - t/cmd-tag-grep.t
    up-to-date:
      - bin/git-up-to-date
      - lib/App/Git/Workflow/Command/UpToDate.pm
      - t/cmd-up-to-date.t
    watch:
      - bin/git-watch
      - lib/App/Git/Workflow/Command/Watch.pm
      - t/cmd-watch.t
